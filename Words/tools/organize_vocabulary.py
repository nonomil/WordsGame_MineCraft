# -*- coding: utf-8 -*-
"""
Organize vocabulary from minecraft_image_links.json into basic/intermediate/advanced files.
Update Chinese translations and add missing phrases.
"""
import json
import os
import time
from typing import Dict, List, Optional, Set

BASE_DIR = os.path.dirname(os.path.abspath(__file__))

# File paths
IMAGE_LINKS_PATH = os.path.join(BASE_DIR, 'minecraft_image_links.json')
BASIC_PATH = os.path.join(BASE_DIR, 'minecraft_basic.json')
INTERMEDIATE_PATH = os.path.join(BASE_DIR, 'minecraft_intermediate.json')
ADVANCED_PATH = os.path.join(BASE_DIR, 'minecraft_advanced.json')

# Core translation mappings (using Unicode escapes)
WIKI_TRANSLATIONS = {
    'water': '\u6c34',  # 水
    'stone': '\u77f3\u5934',  # 石头
    'dirt': '\u6ce5\u571f',  # 泥土
    'grass': '\u8349\u65b9\u5757',  # 草方块
    'wood': '\u6728\u5934',  # 木头
    'oak': '\u6a61\u6728',  # 橡木
    'planks': '\u6728\u677f',  # 木板
    'leaves': '\u6811\u53f6',  # 树叶
    'sapling': '\u6811\u82d7',  # 树苗
    'cobblestone': '\u5706\u77f3',  # 圆石
    'bedrock': '\u57fa\u5ca9',  # 基岩
    'sand': '\u6c99\u5b50',  # 沙子
    'gravel': '\u6c99\u7802',  # 沙砾
    'coal': '\u7164\u70ad',  # 煤炭
    'iron': '\u94c1\u9320',  # 铁锭
    'gold': '\u91d1\u9320',  # 金锭
    'diamond': '\u94bb\u77f3',  # 钻石
    'emerald': '\u7eff\u5b9d\u77f3',  # 绿宝石
    'redstone': '\u7ea2\u77f3\u7c89',  # 红石粉
    'lapis': '\u9752\u91d1\u77f3',  # 青金石
    'quartz': '\u77f3\u82f1',  # 石英
    'obsidian': '\u9ed1\u66dc\u77f3',  # 黑曜石
    'glass': '\u73bb\u7483',  # 玻璃
    'torch': '\u706b\u628a',  # 火把
    'chest': '\u7bb1\u5b50',  # 箱子
    'furnace': '\u7194\u7089',  # 熔炉
    'crafting table': '\u5de5\u4f5c\u53f0',  # 工作台
    'bed': '\u5e8a',  # 床
    'door': '\u95e8',  # 门
    'stairs': '\u697c\u68af',  # 楼梯
    'slab': '\u53f0\u9636',  # 台阶
    'fence': '\u6805\u680f',  # 栅栏
    'gate': '\u6805\u680f\u95e8',  # 栅栏门
    'wool': '\u7f8a\u6bdb',  # 羊毛
    'red': '\u7ea2\u8272',  # 红色
    'blue': '\u84dd\u8272',  # 蓝色
    'green': '\u7eff\u8272',  # 绿色
    'yellow': '\u9ec4\u8272',  # 黄色
    'white': '\u767d\u8272',  # 白色
    'black': '\u9ed1\u8272',  # 黑色
    'orange': '\u6a59\u8272',  # 橙色
    'purple': '\u7d2b\u8272',  # 紫色
    'pink': '\u7c89\u7ea2\u8272',  # 粉红色
    'gray': '\u7070\u8272',  # 灰色
    'brown': '\u68d5\u8272',  # 棕色
    'cyan': '\u9752\u8272',  # 青色
    'lime': '\u9ec4\u7eff\u8272',  # 黄绿色
    'magenta': '\u54c1\u7ea2\u8272',  # 品红色
    'light blue': '\u6de1\u84dd\u8272',  # 淡蓝色
    'light gray': '\u6de1\u7070\u8272',  # 淡灰色
    'apple': '\u82f9\u679c',  # 苹果
    'bread': '\u9762\u5305',  # 面包
    'wheat': '\u5c0f\u9ea6',  # 小麦
    'seeds': '\u79cd\u5b50',  # 种子
    'pig': '\u732a',  # 猪
    'cow': '\u725b',  # 牛
    'sheep': '\u7ef5\u7f8a',  # 绵羊
    'chicken': '\u9e21',  # 鸡
    'zombie': '\u50f5\u5c38',  # 僵尸
    'skeleton': '\u9ab7\u9ac5',  # 骷髅
    'creeper': '\u82e6\u529b\u6015',  # 苦力怕
    'spider': '\u8718\u86db',  # 蜘蛛
    'enderman': '\u672b\u5f71\u4eba',  # 末影人
    'sword': '\u5251',  # 剑
    'pickaxe': '\u9550',  # 镐
    'axe': '\u65a7\u5b50',  # 斧子
    'shovel': '\u94f2\u5b50',  # 铲子
    'hoe': '\u9504\u5934',  # 锄头
    'bow': '\u5f13',  # 弓
    'arrow': '\u7bad',  # 箭
    'armor': '\u76d4\u7532',  # 盔甲
    'helmet': '\u5934\u76d4',  # 头盔
    'chestplate': '\u80f8\u7532',  # 胸甲
    'leggings': '\u62a4\u817f',  # 护腿
    'boots': '\u9774\u5b50',  # 靴子
    'shield': '\u76fe\u724c',  # 盾牌
    'bucket': '\u6876',  # 桶
    'milk': '\u725b\u5976',  # 牛奶
    'egg': '\u9e21\u86cb',  # 鸡蛋
    'leather': '\u76ae\u9769',  # 皮革
    'feather': '\u7fbd\u6bdb',  # 羽毛
    'string': '\u7ebf',  # 线
    'flint': '\u71e7\u77f3',  # 燧石
    'stick': '\u6728\u68cd',  # 木棍
    'bowl': '\u7897',  # 碗
    'sugar': '\u7cd6',  # 糖
    'paper': '\u7eb8',  # 纸
    'book': '\u4e66',  # 书
    'flower': '\u82b1',  # 花
    'mushroom': '\u8611\u83c7',  # 蘑菇
    'cactus': '\u4ed9\u4eba\u638c',  # 仙人掌
    'pumpkin': '\u5357\u74dc',  # 南瓜
    'melon': '\u897f\u74dc',  # 西瓜
    'carrot': '\u80e1\u841d\u535c',  # 胡萝卜
    'potato': '\u9a6c\u94c3\u85af',  # 马铃薯
    'beetroot': '\u751c\u83dc\u6839',  # 甜菜根
    'nether': '\u4e0b\u754c',  # 下界
    'end': '\u672b\u5730',  # 末地
    'portal': '\u4f20\u9001\u95e8',  # 传送门
    'dragon': '\u672b\u5f71\u9f99',  # 末影龙
    'wither': '\u51cb\u96f6',  # 凋零
    'elytra': '\u9798\u7fc5',  # 鞘翅
    'trident': '\u4e09\u53c9\u621f',  # 三叉戟
    'crossbow': '\u5f29',  # 弩
    'totem': '\u4e0d\u6b7b\u56fe\u817e',  # 不死图腾
    'beacon': '\u4fe1\u6807',  # 信标
    'anvil': '\u94c1\u7827',  # 铁砧
    'enchanting table': '\u9644\u9b54\u53f0',  # 附魔台
    'brewing stand': '\u917f\u9020\u53f0',  # 酿造台
    'cauldron': '\u70bc\u836f\u9505',  # 炼药锅
    'dispenser': '\u53d1\u5c04\u5668',  # 发射器
    'dropper': '\u6295\u63b7\u5668',  # 投掷器
    'hopper': '\u6f0f\u6597',  # 漏斗
    'piston': '\u6d3b\u585e',  # 活塞
    'lever': '\u62c9\u6746',  # 拉杆
    'button': '\u6309\u94ae',  # 按钮
    'pressure plate': '\u538b\u529b\u677f',  # 压力板
    'trapdoor': '\u6d3b\u677f\u95e8',  # 活板门
    'note block': '\u97f3\u7b26\u76d2',  # 音符盒
    'jukebox': '\u5531\u7247\u673a',  # 唱片机
    'rail': '\u94c1\u8f68',  # 铁轨
    'minecart': '\u77ff\u8f66',  # 矿车
    'boat': '\u8239',  # 船
    'compass': '\u6307\u5357\u9488',  # 指南针
    'clock': '\u65f6\u949f',  # 时钟
    'painting': '\u753b',  # 画
    'sign': '\u544a\u793a\u724c',  # 告示牌
    'ladder': '\u68af\u5b50',  # 梯子
    'snow': '\u96ea',  # 雪
    'ice': '\u51b0',  # 冰
    'tnt': 'TNT',  # TNT
    'sponge': '\u6d77\u7ef5',  # 海绵
    'clay': '\u9ecf\u571f\u5757',  # 黏土块
    'brick': '\u7816\u5757',  # 砖块
    'sandstone': '\u7802\u5ca9',  # 砂岩
    'granite': '\u82b1\u5c97\u5ca9',  # 花岗岩
    'diorite': '\u95ea\u957f\u5ca9',  # 闪长岩
    'andesite': '\u5b89\u5c71\u5ca9',  # 安山岩
    'prismarine': '\u6d77\u6676\u77f3',  # 海晶石
    'sea lantern': '\u6d77\u6676\u706f',  # 海晶灯
    'magma block': '\u5ca9\u6d46\u5757',  # 岩浆块
    'netherrack': '\u4e0b\u754c\u5ca9',  # 下界岩
    'soul sand': '\u7075\u9b42\u6c99',  # 灵魂沙
    'glowstone': '\u8367\u77f3',  # 荧石
    'end stone': '\u672b\u5730\u77f3',  # 末地石
    'purpur block': '\u7d2b\u73c0\u5757',  # 紫珀块
    'chorus fruit': '\u7d2b\u9882\u679c',  # 紫颂果
    'shulker box': '\u6f5c\u5f71\u76d2',  # 潜影盒
    'ender chest': '\u672b\u5f71\u7bb1',  # 末影箱
    'spawner': '\u5237\u602a\u7b3c',  # 刷怪笼
    'cobweb': '\u8718\u86db\u7f51',  # 蜘蛛网
    'vine': '\u85e4\u8513',  # 藤蔓
    'lily pad': '\u7761\u83b2',  # 睡莲
    'kelp': '\u6d77\u5e26',  # 海带
    'bamboo': '\u7af9\u5b50',  # 竹子
    'honey block': '\u8702\u871c\u5757',  # 蜂蜜块
    'honeycomb block': '\u871c\u813e\u5757',  # 蜜脾块
    'bee nest': '\u8702\u5de2',  # 蜂巢
    'beehive': '\u8702\u7bb1',  # 蜂箱
    'copper': '\u94dc\u5757',  # 铜块
    'amethyst': '\u7d2b\u6c34\u6676\u5757',  # 紫水晶块
    'deepslate': '\u6df1\u677f\u5ca9',  # 深板岩
    'dripstone': '\u6ef4\u6c34\u77f3\u5757',  # 滴水石块
    'moss block': '\u82d4\u85d3\u5757',  # 苔藓块
    'azalea': '\u675c\u9e43\u82b1\u4e1b',  # 杜鹃花丛
    'spore blossom': '\u5b62\u5b50\u82b1',  # 孢子花
    'glow lichen': '\u53d1\u5149\u5730\u8863',  # 发光地衣
    'sculk': '\u5e7d\u5321\u5757',  # 幽匿块
    'sculk sensor': '\u5e7d\u5321\u611f\u6d4b\u4f53',  # 幽匿感测体
    'sculk catalyst': '\u5e7d\u5321\u50ac\u53d1\u4f53',  # 幽匿催发体
    'sculk shrieker': '\u5e7d\u5321\u5c16\u5578\u4f53',  # 幽匿尖啸体
    'warden': '\u76d1\u5b88\u8005',  # 监守者
    'mangrove': '\u7ea2\u6811',  # 红树
    'mud': '\u6ce5\u5df4',  # 泥巴
    'frog': '\u9752\u86d9',  # 青蛙
    'tadpole': '\u8713\u86aa',  # 蝌蚪
    'allay': '\u6096\u7075',  # 悦灵
    'goat': '\u5c71\u7f8a',  # 山羊
    'axolotl': '\u7f8e\u897f\u87b5',  # 美西螈
    'glow squid': '\u53d1\u5149\u9c7f\u9c7c',  # 发光鱿鱼
    'powder snow': '\u7ec6\u96ea',  # 细雪
    'spyglass': '\u671b\u8fdc\u955c',  # 望远镜
    'bundle': '\u6536\u7eb3\u888b',  # 收纳袋
    'candle': '\u8721\u70db',  # 蜡烛
    'lightning rod': '\u907f\u96f7\u9488',  # 避雷针
    'respawn anchor': '\u91cd\u751f\u9524',  # 重生锚
    'lodestone': '\u78c1\u77f3',  # 磁石
    'crying obsidian': '\u54ed\u6ce3\u7684\u9ed1\u66dc\u77f3',  # 哭泣的黑曜石
    'blackstone': '\u9ed1\u77f3',  # 黑石
    'basalt': '\u7384\u6b66\u5ca9',  # 玄武岩
    'soul soil': '\u7075\u9b42\u571f',  # 灵魂土
    'soul torch': '\u7075\u9b42\u706b\u628a',  # 灵魂火把
    'soul lantern': '\u7075\u9b42\u706f\u7b3c',  # 灵魂灯笼
    'soul campfire': '\u7075\u9b42\u8425\u706b',  # 灵魂营火
    'crimson': '\u7eef\u7ea2',  # 绯红
    'warped': '\u8be1\u5f02',  # 诡异
    'nylium': '\u83cc\u5ca9',  # 菌岩
    'fungus': '\u83cc',  # 菌
    'roots': '\u83cc\u7d22',  # 菌索
    'stem': '\u83cc\u67c4',  # 菌柄
    'hyphae': '\u83cc\u6838',  # 菌核
    'shroomlight': '\u83cc\u5149\u4f53',  # 菌光体
    'weeping vines': '\u5782\u6cea\u85e4',  # 垂泪藤
    'twisting vines': '\u7f20\u6028\u85e4',  # 缠怨藤
    'nether sprouts': '\u4e0b\u754c\u82d7',  # 下界苗
    'nether wart': '\u4e0b\u754c\u75a3',  # 下界疣
    'piglin': '\u732a\u7075',  # 猪灵
    'hoglin': '\u75a3\u732a\u517d',  # 疣猪兽
    'strider': '\u7092\u8db3\u517d',  # 炽足兽
    'zoglin': '\u50f5\u5c38\u75a3\u732a\u517d',  # 僵尸疣猪兽
    'netherite': '\u4e0b\u754c\u5408\u91d1',  # 下界合金
    'ancient debris': '\u8fdc\u53e4\u6b8b\u9ab8',  # 远古残骸
    'target': '\u6807\u9776',  # 标靶
    'smithing table': '\u953b\u9020\u53f0',  # 锻造台
    'fletching table': '\u5236\u7bad\u53f0',  # 制箭台
    'cartography table': '\u5236\u56fe\u53f0',  # 制图台
    'grindstone': '\u7802\u8f6e',  # 砂轮
    'stonecutter': '\u5207\u77f3\u673a',  # 切石机
    'loom': '\u7ec7\u5e03\u673a',  # 织布机
    'composter': '\u5806\u80a5\u7bb1',  # 堆肥箱
    'barrel': '\u6728\u6876',  # 木桶
    'smoker': '\u70df\u718f\u7089',  # 烟熏炉
    'blast furnace': '\u9ad8\u7089',  # 高炉
    'campfire': '\u8425\u706b',  # 营火
    'lantern': '\u706f\u7b3c',  # 灯笼
    'bell': '\u949f',  # 钟
    'scaffolding': '\u811a\u624b\u67b6',  # 脚手架
    'lectern': '\u8bb2\u53f0',  # 讲台
    'conduit': '\u6f6e\u6d8c\u6838\u5fc3',  # 潮涌核心
    'turtle egg': '\u6d77\u9f9f\u86cb',  # 海龟蛋
    'scute': '\u9cde\u7532',  # 鳞甲
    'phantom membrane': '\u5e7b\u7fc5\u819c',  # 幻翼膜
    'nautilus shell': '\u9e66\u9e49\u87ba\u58f3',  # 鹦鹉螺壳
    'heart of the sea': '\u6d77\u6d0b\u4e4b\u5fc3',  # 海洋之心
    'dragon breath': '\u9f99\u606f',  # 龙息
    'nether star': '\u4e0b\u754c\u4e4b\u661f',  # 下界之星
    'end crystal': '\u672b\u5f71\u6c34\u6676',  # 末影水晶
    'enchanted golden apple': '\u9644\u9b54\u91d1\u82f9\u679c',  # 附魔金苹果
    'golden apple': '\u91d1\u82f9\u679c',  # 金苹果
    'golden carrot': '\u91d1\u80e1\u841d\u535c',  # 金胡萝卜
    'glistering melon slice': '\u95ea\u70c1\u7684\u897f\u74dc\u7247',  # 闪烁的西瓜片
    'honey bottle': '\u8702\u871c\u74f6',  # 蜂蜜瓶
    'suspicious stew': '\u8ff7\u4e4b\u7092\u83dc',  # 迷之炒菜
    'sweet berries': '\u751c\u6d46\u679c',  # 甜浆果
    'glow berries': '\u53d1\u5149\u6d46\u679c',  # 发光浆果
    'dried kelp': '\u5e72\u6d77\u5e26',  # 干海带
    'potion': '\u836f\u6c34',  # 药水
    'splash potion': '\u55b7\u6e85\u836f\u6c34',  # 喷溅药水
    'lingering potion': '\u6ede\u7559\u836f\u6c34',  # 滞留药水
    'tipped arrow': '\u836f\u7bad',  # 药箭
    'spectral arrow': '\u5149\u7075\u7bad',  # 光灵箭
    'firework rocket': '\u70df\u82b1\u706b\u7bad',  # 烟花火箭
    'firework star': '\u70df\u82b1\u4e4b\u661f',  # 烟花之星
    'item frame': '\u7269\u54c1\u5c55\u793a\u6846',  # 物品展示框
    'glow item frame': '\u53d1\u5149\u7269\u54c1\u5c55\u793a\u6846',  # 发光物品展示框
    'lead': '\u62f4\u7ef3',  # 拴绳
    'name tag': '\u547d\u540d\u724c',  # 命名牌
    'saddle': '\u978d',  # 鞍
    'horse armor': '\u9a6c\u94e0',  # 马铠
    'music disc': '\u97f3\u4e50\u5531\u7247',  # 音乐唱片
    'banner': '\u65d7\u5e1c',  # 旗帜
    'banner pattern': '\u65d7\u5e1c\u56fe\u6848',  # 旗帜图案
    'dye': '\u67d3\u6599',  # 染料
    'ink sac': '\u58a8\u56ca',  # 墨囊
    'glow ink sac': '\u53d1\u5149\u58a8\u56ca',  # 发光墨囊
    'bone': '\u9aa8\u5934',  # 骨头
    'bone meal': '\u9aa8\u7c89',  # 骨粉
    'gunpowder': '\u706b\u836f',  # 火药
    'blaze powder': '\u70c8\u7130\u7c89',  # 烈焰粉
    'blaze rod': '\u70c8\u7130\u68d2',  # 烈焰棒
    'ender pearl': '\u672b\u5f71\u73cd\u73e0',  # 末影珍珠
    'eye of ender': '\u672b\u5f71\u4e4b\u773c',  # 末影之眼
    'ghast tear': '\u6076\u9b42\u6cea',  # 恶魂泪
    'magma cream': '\u5ca9\u6d46\u818f',  # 岩浆膏
    'slimeball': '\u9ecf\u6db2\u7403',  # 黏液球
    'prismarine shard': '\u6d77\u6676\u7247',  # 海晶片
    'prismarine crystals': '\u6d77\u6676\u7c92',  # 海晶粒
    'rabbit foot': '\u5154\u5b50\u811a',  # 兔子脚
    'rabbit hide': '\u5154\u5b50\u76ae',  # 兔子皮
    'spider eye': '\u8718\u86db\u773c',  # 蜘蛛眼
    'fermented spider eye': '\u53d1\u9175\u8718\u86db\u773c',  # 发酵蜘蛛眼
    'rotten flesh': '\u8150\u8089',  # 腐肉
    'poisonous potato': '\u6bd2\u9a6c\u94c3\u85af',  # 毒马铃薯
    'pufferfish': '\u6cb3\u8c5a',  # 河豚
    'tropical fish': '\u70ed\u5e26\u9c7c',  # 热带鱼
    'cod': '\u9ccd\u9c7c',  # 鳕鱼
    'salmon': '\u9c9b\u9c7c',  # 鲑鱼
    'cooked cod': '\u719f\u9ccd\u9c7c',  # 熟鳕鱼
    'cooked salmon': '\u719f\u9c9b\u9c7c',  # 熟鲑鱼
    'cooked chicken': '\u719f\u9e21\u8089',  # 熟鸡肉
    'cooked porkchop': '\u719f\u732a\u6392',  # 熟猪排
    'cooked beef': '\u725b\u6392',  # 牛排
    'cooked mutton': '\u719f\u7f8a\u8089',  # 熟羊肉
    'cooked rabbit': '\u719f\u5154\u8089',  # 熟兔肉
    'raw chicken': '\u751f\u9e21\u8089',  # 生鸡肉
    'raw porkchop': '\u751f\u732a\u6392',  # 生猪排
    'raw beef': '\u751f\u725b\u8089',  # 生牛肉
    'raw mutton': '\u751f\u7f8a\u8089',  # 生羊肉
    'raw rabbit': '\u751f\u5154\u8089',  # 生兔肉
    'mushroom stew': '\u8611\u83c7\u7172',  # 蘑菇煲
    'rabbit stew': '\u5154\u8089\u7172',  # 兔肉煲
    'beetroot soup': '\u751c\u83dc\u6c64',  # 甜菜汤
    'cookie': '\u66f2\u5947\u997c\u5e72',  # 曲奇饼干
    'cake': '\u86cb\u7cd5',  # 蛋糕
    'pumpkin pie': '\u5357\u74dc\u6d3e',  # 南瓜派
    'melon slice': '\u897f\u74dc\u7247',  # 西瓜片
    'baked potato': '\u70e4\u9a6c\u94c3\u85af',  # 烤马铃薯
    'charcoal': '\u6728\u70ad',  # 木炭
    'coal block': '\u7164\u70ad\u5757',  # 煤炭块
    'iron block': '\u94c1\u5757',  # 铁块
    'gold block': '\u91d1\u5757',  # 金块
    'diamond block': '\u94bb\u77f3\u5757',  # 钻石块
    'emerald block': '\u7eff\u5b9d\u77f3\u5757',  # 绿宝石块
    'lapis block': '\u9752\u91d1\u77f3\u5757',  # 青金石块
    'redstone block': '\u7ea2\u77f3\u5757',  # 红石块
    'quartz block': '\u77f3\u82f1\u5757',  # 石英块
    'iron ore': '\u94c1\u77ff\u77f3',  # 铁矿石
    'gold ore': '\u91d1\u77ff\u77f3',  # 金矿石
    'diamond ore': '\u94bb\u77f3\u77ff\u77f3',  # 钻石矿石
    'emerald ore': '\u7eff\u5b9d\u77f3\u77ff\u77f3',  # 绿宝石矿石
    'lapis ore': '\u9752\u91d1\u77f3\u77ff\u77f3',  # 青金石矿石
    'redstone ore': '\u7ea2\u77f3\u77ff\u77f3',  # 红石矿石
    'coal ore': '\u7164\u77ff\u77f3',  # 煤矿石
    'copper ore': '\u94dc\u77ff\u77f3',  # 铜矿石
    'nether gold ore': '\u4e0b\u754c\u91d1\u77ff\u77f3',  # 下界金矿石
    'nether quartz ore': '\u4e0b\u754c\u77f3\u82f1\u77ff\u77f3',  # 下界石英矿石
    'raw iron': '\u7c97\u94c1',  # 粗铁
    'raw gold': '\u7c97\u91d1',  # 粗金
    'raw copper': '\u7c97\u94dc',  # 粗铜
    'iron ingot': '\u94c1\u9320',  # 铁锭
    'gold ingot': '\u91d1\u9320',  # 金锭
    'copper ingot': '\u94dc\u9320',  # 铜锭
    'netherite ingot': '\u4e0b\u754c\u5408\u91d1\u9320',  # 下界合金锭
    'netherite scrap': '\u4e0b\u754c\u5408\u91d1\u788e\u7247',  # 下界合金碎片
    'iron nugget': '\u94c1\u7c92',  # 铁粒
    'gold nugget': '\u91d1\u7c92',  # 金粒
    'redstone dust': '\u7ea2\u77f3\u7c89',  # 红石粉
    'glowstone dust': '\u8367\u77f3\u7c89',  # 荧石粉
    'lapis lazuli': '\u9752\u91d1\u77f3',  # 青金石
    'nether quartz': '\u4e0b\u754c\u77f3\u82f1',  # 下界石英
    'echo shard': '\u56de\u58f0\u788e\u7247',  # 回声碎片
    'disc fragment': '\u5531\u7247\u788e\u7247',  # 唱片碎片
    'wheat seeds': '\u5c0f\u9ea6\u79cd\u5b50',  # 小麦种子
    'pumpkin seeds': '\u5357\u74dc\u79cd\u5b50',  # 南瓜种子
    'melon seeds': '\u897f\u74dc\u79cd\u5b50',  # 西瓜种子
    'beetroot seeds': '\u751c\u83dc\u79cd\u5b50',  # 甜菜种子
    'cocoa beans': '\u53ef\u53ef\u8c46',  # 可可豆
    'torchflower seeds': '\u706b\u628a\u82b1\u79cd\u5b50',  # 火把花种子
    'pitcher pod': '\u74f6\u5b50\u8349\u8c46\u8358',  # 瓶子草豆荚
    'sugar cane': '\u7518\u8517',  # 甘蔗
    'chorus fruit': '\u7d2b\u9882\u679c',  # 紫颂果
    'popped chorus fruit': '\u7206\u88c2\u7d2b\u9882\u679c',  # 爆裂紫颂果
    'oak boat': '\u6a61\u6728\u8239',  # 橡木船
    'spruce boat': '\u4e91\u6749\u8239',  # 云杉船
    'birch boat': '\u767d\u6866\u8239',  # 白桦船
    'jungle boat': '\u4e1b\u6797\u8239',  # 丛林船
    'acacia boat': '\u91d1\u5408\u6b22\u8239',  # 金合欢船
    'dark oak boat': '\u6df1\u8272\u6a61\u6728\u8239',  # 深色橡木船
    'mangrove boat': '\u7ea2\u6811\u8239',  # 红树船
    'cherry boat': '\u6a31\u82b1\u8239',  # 樱花船
    'bamboo raft': '\u7af9\u7b4f',  # 竹筏
    'oak chest boat': '\u6a61\u6728\u8fd0\u8f93\u8239',  # 橡木运输船
    'spruce chest boat': '\u4e91\u6749\u8fd0\u8f93\u8239',  # 云杉运输船
    'birch chest boat': '\u767d\u6866\u8fd0\u8f93\u8239',  # 白桦运输船
    'jungle chest boat': '\u4e1b\u6797\u8fd0\u8f93\u8239',  # 丛林运输船
    'acacia chest boat': '\u91d1\u5408\u6b22\u8fd0\u8f93\u8239',  # 金合欢运输船
    'dark oak chest boat': '\u6df1\u8272\u6a61\u6728\u8fd0\u8f93\u8239',  # 深色橡木运输船
    'mangrove chest boat': '\u7ea2\u6811\u8fd0\u8f53\u8239',  # 红树运输船
    'cherry chest boat': '\u6a31\u82b1\u8fd0\u8f93\u8239',  # 樱花运输船
    'bamboo chest raft': '\u7af9\u8fd0\u8f93\u7b4f',  # 竹运输筏
    'minecart with chest': '\u8fd0\u8f93\u77ff\u8f66',  # 运输矿车
    'minecart with furnace': '\u52a8\u529b\u77ff\u8f66',  # 动力矿车
    'minecart with tnt': 'TNT\u77ff\u8f66',  # TNT矿车
    'minecart with hopper': '\u6f0f\u6597\u77ff\u8f66',  # 漏斗矿车
    'minecart with spawner': '\u5237\u602a\u7b3c\u77ff\u8f66',  # 刷怪笼矿车
    'minecart with command block': '\u547d\u4ee4\u65b9\u5757\u77ff\u8f66',  # 命令方块矿车
    'powered rail': '\u52a8\u529b\u94c1\u8f68',  # 动力铁轨
    'detector rail': '\u63a2\u6d4b\u94c1\u8f68',  # 探测铁轨
    'activator rail': '\u6fc0\u6d3b\u94c1\u8f68',  # 激活铁轨
    'recovery compass': '\u590d\u82cf\u6307\u5357\u9488',  # 复苏指南针
    'fishing rod': '\u9493\u9c7c\u7aff',  # 钓鱼竿
    'shears': '\u526a\u5200',  # 剪刀
    'fire charge': '\u706b\u7130\u5f39',  # 火焰弹
    'glass bottle': '\u73bb\u7483\u74f6',  # 玻璃瓶
    'water bucket': '\u6c34\u6876',  # 水桶
    'lava bucket': '\u5ca9\u6d46\u6876',  # 岩浆桶
    'milk bucket': '\u725b\u5976\u6876',  # 牛奶桶
    'powder snow bucket': '\u7ec6\u96ea\u6876',  # 细雪桶
    'bucket of cod': '\u9ccd\u9c7c\u6876',  # 鳕鱼桶
    'bucket of salmon': '\u9c9b\u9c7c\u6876',  # 鲑鱼桶
    'bucket of tropical fish': '\u70ed\u5e26\u9c7c\u6876',  # 热带鱼桶
    'bucket of pufferfish': '\u6cb3\u8c5a\u6876',  # 河豚桶
    'bucket of axolotl': '\u7f8e\u897f\u87b5\u6876',  # 美西螈桶
    'bucket of tadpole': '\u8713\u86aa\u6876',  # 蝌蚪桶
    'snowball': '\u96ea\u7403',  # 雪球
    'ender eye': '\u672b\u5f71\u4e4b\u773c',  # 末影之眼
    'written book': '\u4e66\u4e0e\u7b14',  # 书与笔
    'book and quill': '\u4e66\u4e0e\u7b14',  # 书与笔
    'enchanted book': '\u9644\u9b54\u4e66',  # 附魔书
    'knowledge book': '\u77e5\u8bc6\u4e4b\u4e66',  # 知识之书
    'writable book': '\u53ef\u5199\u4e66',  # 可写书
    'map': '\u5730\u56fe',  # 地图
    'empty map': '\u7a7a\u5730\u56fe',  # 空地图
    'filled map': '\u5df2\u7ed8\u5236\u7684\u5730\u56fe',  # 已绘制的地图
    'explorer map': '\u63a2\u9669\u5bb6\u5730\u56fe',  # 探险家地图
    'ocean explorer map': '\u6d77\u6d0b\u63a2\u9669\u5bb6\u5730\u56fe',  # 海洋探险家地图
    'woodland explorer map': '\u6797\u5730\u63a2\u9669\u5bb6\u5730\u56fe',  # 林地探险家地图
    'treasure map': '\u85cf\u5b9d\u56fe',  # 藏宝图
    'buried treasure map': '\u57cb\u85cf\u7684\u5b9d\u85cf\u5730\u56fe',  # 埋藏的宝藏地图
    'trial key': '\u8bd5\u70bc\u5ba4\u94a5\u5319',  # 试炼室钥匙
    'ominous trial key': '\u4e0d\u7965\u8bd5\u70bc\u5ba4\u94a5\u5319',  # 不祥试炼室钥匙
    'vault': '\u5b9d\u5e93',  # 宝库
    'ominous vault': '\u4e0d\u7965\u5b9d\u5e93',  # 不祥宝库
    'trial spawner': '\u8bd5\u70bc\u5237\u602a\u7b3c',  # 试炼刷怪笼
    'breeze': '\u5fae\u98ce',  # 微风
    'wind charge': '\u98ce\u5f39',  # 风弹
    'mace': '\u72fc\u7259\u68d2',  # 狼牙棒
    'heavy core': '\u91cd\u6838',  # 重核
    'flow armor trim': '\u6d41\u52a8\u76d4\u7532\u9970\u7eb9',  # 流动盔甲饰纹
    'bolt armor trim': '\u95ea\u7535\u76d4\u7532\u9970\u7eb9',  # 闪电盔甲饰纹
    'flow banner pattern': '\u6d41\u52a8\u65d7\u5e1c\u56fe\u6848',  # 流动旗帜图案
    'guster banner pattern': '\u72c2\u98ce\u65d7\u5e1c\u56fe\u6848',  # 狂风旗帜图案
    'flow pottery sherd': '\u6d41\u52a8\u9676\u7247',  # 流动陶片
    'guster pottery sherd': '\u72c2\u98ce\u9676\u7247',  # 狂风陶片
    'scrape pottery sherd': '\u522e\u64e6\u9676\u7247',  # 刮擦陶片
    'armadillo scute': '\u72b0\u5c71\u7532\u9cde\u7532',  # 犰狳鳞甲
    'wolf armor': '\u72fc\u76d4\u7532',  # 狼盔甲
    'armadillo spawn egg': '\u72b0\u5c71\u7532\u751f\u6210\u86cb',  # 犰狳生成蛋
    'bogged spawn egg': '\u6cbc\u6cfd\u9ab7\u9ac5\u751f\u6210\u86cb',  # 沼泽骷髅生成蛋
    'breeze spawn egg': '\u5fae\u98ce\u751f\u6210\u86cb'  # 微风生成蛋
}

# Difficulty classification
BASIC_WORDS = {
    'stone', 'dirt', 'grass', 'wood', 'water', 'sand', 'gravel', 'coal', 'iron', 'oak', 'planks',
    'leaves', 'sapling', 'cobblestone', 'torch', 'chest', 'crafting', 'table', 'furnace',
    'pickaxe', 'sword', 'axe', 'shovel', 'hoe', 'stick', 'wool', 'bed', 'door', 'stairs',
    'slab', 'fence', 'gate', 'glass', 'flower', 'mushroom', 'apple', 'bread', 'wheat',
    'seeds', 'pig', 'cow', 'sheep', 'chicken', 'leather', 'feather', 'string', 'flint',
    'bucket', 'milk', 'egg', 'sugar', 'paper', 'book', 'granite', 'diorite', 'andesite',
    'bedrock', 'spruce', 'birch', 'jungle', 'acacia', 'sponge', 'dandelion', 'poppy',
    'orchid', 'tulip', 'daisy', 'cactus', 'clay', 'brick', 'sandstone', 'rail', 'minecart',
    'boat', 'compass', 'clock', 'painting', 'sign', 'ladder', 'snow', 'ice', 'pumpkin',
    'melon', 'carrot', 'potato', 'beetroot', 'kelp', 'bamboo', 'honey', 'honeycomb',
    'red', 'blue', 'green', 'yellow', 'white', 'black', 'orange', 'purple', 'pink',
    'gray', 'brown', 'cyan', 'lime', 'magenta', 'light'
}

INTERMEDIATE_WORDS = {
    'diamond', 'emerald', 'gold', 'redstone', 'lapis', 'quartz', 'obsidian', 'nether',
    'portal', 'blaze', 'ghast', 'zombie', 'skeleton', 'creeper', 'spider', 'enderman',
    'bow', 'arrow', 'armor', 'helmet', 'chestplate', 'leggings', 'boots', 'shield',
    'enchanting', 'anvil', 'brewing', 'potion', 'cauldron', 'dispenser', 'dropper',
    'hopper', 'piston', 'lever', 'button', 'pressure', 'plate', 'trapdoor', 'noteblock',
    'jukebox', 'beacon', 'conduit', 'prismarine', 'guardian', 'elder', 'sealantern',
    'magma', 'soul', 'blackstone', 'basalt', 'crimson', 'warped', 'shroomlight',
    'respawn', 'anchor', 'lodestone', 'netherite', 'ancient', 'debris', 'crying',
    'piglin', 'hoglin', 'strider', 'zoglin', 'target', 'copper', 'amethyst', 'deepslate',
    'dripstone', 'moss', 'azalea', 'dripleaf', 'spore', 'blossom', 'glow', 'lichen',
    'sculk', 'catalyst', 'sensor', 'shrieker', 'warden', 'mangrove', 'mud', 'frog',
    'tadpole', 'allay', 'goat', 'axolotl', 'squid', 'powder', 'telescope', 'bundle',
    'candle', 'lightning', 'rod', 'spyglass', 'tinted', 'tuff', 'calcite', 'pointed',
    'rooted', 'hanging', 'cave', 'lush', 'dripstone', 'powder', 'snow'
}

ADVANCED_WORDS = {
    'dragon', 'wither', 'elytra', 'shulker', 'chorus', 'purpur', 'end', 'crystal',
    'totem', 'undying', 'trident', 'crossbow', 'phantom', 'membrane', 'nautilus',
    'shell', 'heart', 'sea', 'scute', 'turtle', 'spectral', 'tipped', 'lingering',
    'splash', 'breath', 'nether', 'star', 'enchanted', 'golden', 'structure',
    'void', 'barrier', 'command', 'repeating', 'chain', 'jigsaw', 'debug',
    'knowledge', 'spawner', 'infested', 'silverfish', 'endermite', 'vex', 'evoker',
    'vindicator', 'pillager', 'ravager', 'witch', 'illusioner', 'giant', 'horse',
    'donkey', 'mule', 'llama', 'trader', 'wandering', 'fox', 'panda', 'bee',
    'polar', 'bear', 'dolphin', 'cod', 'salmon', 'tropical', 'fish', 'pufferfish',
    'bat', 'parrot', 'ocelot', 'cat', 'wolf', 'rabbit', 'mooshroom', 'golem',
    'villager', 'iron', 'snow', 'trial', 'vault', 'breeze', 'wind', 'charge',
    'mace', 'heavy', 'core', 'flow', 'bolt', 'guster', 'scrape', 'armadillo',
    'bogged', 'ominous'
}

def classify_difficulty(word: str) -> str:
    """Classify word difficulty based on game progression."""
    word_lower = word.lower()
    
    # Check for exact matches first
    if word_lower in BASIC_WORDS:
        return 'basic'
    elif word_lower in INTERMEDIATE_WORDS:
        return 'intermediate'
    elif word_lower in ADVANCED_WORDS:
        return 'advanced'
    
    # Check for partial matches
    for basic_word in BASIC_WORDS:
        if basic_word in word_lower or word_lower in basic_word:
            return 'basic'
    
    for intermediate_word in INTERMEDIATE_WORDS:
        if intermediate_word in word_lower or word_lower in intermediate_word:
            return 'intermediate'
    
    for advanced_word in ADVANCED_WORDS:
        if advanced_word in word_lower or word_lower in advanced_word:
            return 'advanced'
    
    # Default to intermediate if no match
    return 'intermediate'

def get_wiki_translation(word: str) -> Optional[str]:
    """Get translation from wiki mappings."""
    word_lower = word.lower().strip()
    return WIKI_TRANSLATIONS.get(word_lower)

def generate_phrase(word: str, chinese: str) -> tuple[str, str]:
    """Generate English phrase and Chinese translation."""
    word_lower = word.lower()
    
    # Determine category and generate phrase
    if any(tool in word_lower for tool in ['sword', 'pickaxe', 'axe', 'shovel', 'hoe']):
        phrase = f"use {word.lower()}"
        phrase_translation = f"\u4f7f\u7528{chinese}"  # 使用
    elif any(block in word_lower for block in ['stone', 'dirt', 'wood', 'planks', 'block']):
        phrase = f"mine {word.lower()}"
        phrase_translation = f"\u6316\u6398{chinese}"  # 挖掘
    elif any(food in word_lower for food in ['apple', 'bread', 'meat', 'fish', 'carrot']):
        phrase = f"eat {word.lower()}"
        phrase_translation = f"\u5403{chinese}"  # 吃
    elif any(animal in word_lower for animal in ['pig', 'cow', 'sheep', 'chicken']):
        phrase = f"{word.lower()} farm"
        phrase_translation = f"{chinese}\u519c\u573a"  # 农场
    elif any(color in word_lower for color in ['red', 'blue', 'green', 'yellow', 'white', 'black']):
        phrase = f"{word.lower()} wool"
        phrase_translation = f"{chinese}\u7f8a\u6bdb"  # 羊毛
    else:
        phrase = f"find {word.lower()}"
        phrase_translation = f"\u627e\u5230{chinese}"  # 找到
    
    return phrase, phrase_translation

def load_existing_words(file_path: str) -> Set[str]:
    """Load existing words from a vocabulary file."""
    existing_words = set()
    if os.path.exists(file_path):
        try:
            with open(file_path, 'r', encoding='utf-8') as f:
                data = json.load(f)
                for item in data:
                    existing_words.add(item.get('word', '').lower())
        except Exception as e:
            print(f"Error loading {file_path}: {e}")
    return existing_words

def process_vocabulary_entry(entry: dict) -> dict:
    """Process a single vocabulary entry."""
    word = entry.get('word', '').strip()
    if not word or word == '\u82f1\u6587\u540d\u79f0':  # 英文名称
        return None
    
    # Get or update Chinese translation
    chinese = entry.get('chinese', '')
    if not chinese or chinese == '??':
        wiki_translation = get_wiki_translation(word)
        if wiki_translation:
            chinese = wiki_translation
        else:
            # Fallback translation logic
            chinese = word  # Keep original if no translation found
    
    # Classify difficulty
    difficulty = classify_difficulty(word)
    
    # Generate or update phrases
    phrase = entry.get('phrase', '')
    phrase_translation = entry.get('phraseTranslation', '')
    
    if not phrase or phrase == '????' or not phrase_translation or phrase_translation == '????':
        generated_phrase, generated_phrase_translation = generate_phrase(word, chinese)
        if not phrase or phrase == '????':
            phrase = generated_phrase
        if not phrase_translation or phrase_translation == '????':
            phrase_translation = generated_phrase_translation
    
    # Determine category
    category = entry.get('category', '')
    if not category:
        word_lower = word.lower()
        if any(tool in word_lower for tool in ['sword', 'pickaxe', 'axe', 'shovel', 'hoe']):
            category = 'tool'
        elif any(block in word_lower for block in ['stone', 'dirt', 'wood', 'block']):
            category = 'block'
        elif any(food in word_lower for food in ['apple', 'bread', 'meat', 'fish']):
            category = 'food'
        elif any(animal in word_lower for animal in ['pig', 'cow', 'sheep', 'chicken']):
            category = 'animal'
        elif any(color in word_lower for color in ['red', 'blue', 'green', 'yellow', 'white', 'black']):
            category = 'color'
        else:
            category = 'item'
    
    # Build the processed entry
    processed_entry = {
        'word': word,
        'standardized': entry.get('standardized', word),
        'chinese': chinese,
        'phonetic': entry.get('phonetic', ''),
        'phrase': phrase,
        'phraseTranslation': phrase_translation,
        'difficulty': difficulty,
        'category': category,
        'imageURLs': entry.get('imageURLs', [])
    }
    
    return processed_entry

def organize_vocabulary():
    """Main function to organize vocabulary from minecraft_image_links.json."""
    print("Starting vocabulary organization...")
    
    # Load source data
    if not os.path.exists(IMAGE_LINKS_PATH):
        print(f"Source file not found: {IMAGE_LINKS_PATH}")
        return
    
    with open(IMAGE_LINKS_PATH, 'r', encoding='utf-8') as f:
        source_data = json.load(f)
    
    print(f"Loaded {len(source_data)} entries from source file")
    
    # Load existing vocabulary files
    existing_basic = load_existing_words(BASIC_PATH)
    existing_intermediate = load_existing_words(INTERMEDIATE_PATH)
    existing_advanced = load_existing_words(ADVANCED_PATH)
    
    print(f"Existing words - Basic: {len(existing_basic)}, Intermediate: {len(existing_intermediate)}, Advanced: {len(existing_advanced)}")
    
    # Process and categorize entries
    basic_entries = []
    intermediate_entries = []
    advanced_entries = []
    
    processed_count = 0
    skipped_count = 0
    
    for entry in source_data:
        processed_entry = process_vocabulary_entry(entry)
        if not processed_entry:
            skipped_count += 1
            continue
        
        word_lower = processed_entry['word'].lower()
        difficulty = processed_entry['difficulty']
        
        # Check if word already exists in target files
        if (word_lower in existing_basic or 
            word_lower in existing_intermediate or 
            word_lower in existing_advanced):
            continue
        
        # Add to appropriate category
        if difficulty == 'basic':
            basic_entries.append(processed_entry)
        elif difficulty == 'intermediate':
            intermediate_entries.append(processed_entry)
        else:  # advanced
            advanced_entries.append(processed_entry)
        
        processed_count += 1
    
    print(f"Processed {processed_count} new entries, skipped {skipped_count}")
    print(f"New entries - Basic: {len(basic_entries)}, Intermediate: {len(intermediate_entries)}, Advanced: {len(advanced_entries)}")
    
    # Load and update existing files
    def update_vocabulary_file(file_path: str, new_entries: List[dict]):
        if not new_entries:
            print(f"No new entries for {os.path.basename(file_path)}")
            return
        
        existing_data = []
        if os.path.exists(file_path):
            try:
                with open(file_path, 'r', encoding='utf-8') as f:
                    existing_data = json.load(f)
            except Exception as e:
                print(f"Error loading {file_path}: {e}")
        
        # Combine and sort
        combined_data = existing_data + new_entries
        combined_data.sort(key=lambda x: x.get('word', '').lower())
        
        # Create backup
        if existing_data:
            backup_path = file_path.replace('.json', f'.backup.{int(time.time())}.json')
            with open(backup_path, 'w', encoding='utf-8') as f:
                json.dump(existing_data, f, ensure_ascii=False, indent=2)
            print(f"Backup created: {backup_path}")
        
        # Save updated file
        with open(file_path, 'w', encoding='utf-8') as f:
            json.dump(combined_data, f, ensure_ascii=False, indent=2)
        
        print(f"Updated {os.path.basename(file_path)} with {len(new_entries)} new entries (total: {len(combined_data)})")
    
    # Update all vocabulary files
    update_vocabulary_file(BASIC_PATH, basic_entries)
    update_vocabulary_file(INTERMEDIATE_PATH, intermediate_entries)
    update_vocabulary_file(ADVANCED_PATH, advanced_entries)
    
    print("\nVocabulary organization completed!")
    print(f"Total new entries added: {len(basic_entries) + len(intermediate_entries) + len(advanced_entries)}")

if __name__ == '__main__':
    organize_vocabulary()